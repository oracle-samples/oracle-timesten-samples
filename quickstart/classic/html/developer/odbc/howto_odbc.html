<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Compile and Run ODBC Sample Programs</title>
<link type="text/css" rel="stylesheet" href="../../css/qs.css">
<script type="text/javascript" src="../../css/qsfuncs.js"></script>
</head>
<body onload="javascript:qsInit2();">
<div id="toppane"></div>
<div id="leftpane"></div>
<div id="content">


<span class="PageTitle-navy">Compile and Run ODBC Sample Programs</span>
<p class="normal"><span class="section1"><br />
IMPORTANT PRE-REQUISITES</span> </p>
<blockquote>
<p class="normal-bold">1. <a href="../sample_dsn_setup.html">Manually Configure Sample DSN for Sample Programs</a> </span></p>
  <p class="normal-bold">2. Set up sample database and user accounts</p>
  <p class="normal">The following build_sampledb script should be run once to set up the sample database and user accounts </p>
  <table width="700" border="0">
      <tr>
        <td colspan="2" valign="top" >
        <li> Set up the Instance Environment Variables<br />
e.g. If your TimesTen instance location is under <span class="codetext">/home/timesten/instance/tt181</span> directory, execute the command
<br/><br />
<span class="codetext">$ source /home/timesten/instance/tt181/bin/ttenv.sh </span></li>
<br />
        <li>Run the <span class="codetext">quickstart/classic/sample_scripts/createdb/build_sampledb</span> script, which creates the sample database and user accounts that are used by the sample programs. This script  creates the TimesTen user accounts and prompts you for the desired user passwords.</li></td>
      </tr>
  </table>
  <br />
  <table width="608" border="0">
    
    <tr>
      <td valign="top" class="normal">Unix/Linux:</td>
      <td class="codetext">&nbsp;</td>
      <td class="codetext">$ cd quickstart/classic/sample_scripts/createdb<br />
        $
        ./build_sampledb.sh</td>
    </tr>
  </table>
   <p class="normal-bold">3. Set up  environment to compile and run the sample application</p>
  <p class="normal">The following script must be run for each of the terminal session:</p>
    <li><p class="normal">Set up the Instance environment variables:<br />
e.g. If your TimesTen instance location is under <span class="codetext">/home/timesten/instance/tt181</span> directory, execute the command
<br/><br />
<span class="codetext">$ source /home/timesten/instance/tt181/bin/ttenv.sh </span></p></li>
 
  <li><p class="normal">Set up quickstart environment variables:</p> 
  <table width="606" border="0">
  
    <tr>
      <td valign="top" class="normal">Unix/Linux:</td>
      <td class="codetext">&nbsp;</td>
      <td class="codetext">$ . quickstart/classic/ttquickstartenv.sh <span class="normal-bold">OR</span><br />
        $ source 
        quickstart/classic/ttquickstartenv.csh</td>
    </tr>
  </table>
  </li>
</blockquote>
<p class="normal"><span class="section1">How to compile the sample ODBC programs</span></p>
<p class="normal">To compile the sample programs in the sample_code/odbc directory, you simply run the makefile supplied in the same directory. Note that the appropriate makefile is made available based on the platform of your TimesTen installation. </p>
<p class="normal">Firstly, select the platform specific Makefile and copy from <span class="codetext">quickstart/classic/sample_code/odbc/makefiles</span> to the upper level directory.

<br/><br/>
For example, if your platform is Linux x86-64bit, execute the following commands:<br/><br/>
<span class="codetext">cd quickstart/classic/sample_code/odbc/makefiles</span><br/>
<span class="codetext">cp Makefile.linux8664.proto ../Makefile</span><br/>
<span class="codetext">cd ..</span><br/>
</p>

<p><span class="normal">To build a specific sample program in the sample_code/odbc directory, use the following command:</span></p>
<table width="806" border="0">
  
  <tr>
    <td class="normal"></td>
    <td class="normal">[Linux/Unix]</td>
     <td class="codetext">$ make &lt;program-name&gt;</td>
  </tr>
  <tr>
    <td height="28" class="normal"></td>
    <td colspan="2" class="normal">where &lt;program-name&gt; is the program you want to compile.</td>
  </tr>
</table>
<p class="normal">For example, to compile the bulkinsert program, you do:</p>
<table width="540" border="0">
 
  <tr>
    <td class="normal"></td>
    <td class="normal">[Linux/Unix]</td>
    <td class="codetext">$ make bulkinsert</td>
  </tr>
</table>
 
<p class="normal">&nbsp;</p>
<p class="section1">How to run the sample ODBC programs</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="62" valign="top" class="normal">&nbsp; <strong>bulkinsert</strong></td>
    <td width="608" valign="top" class="normal">This program implements and measures time needed for insertion of many rows into a table. Parameters allow you to specify whether there are indexes on the table and whether statistics should be computed after doing the inserts. You can also specify insertion of the rows in batches to achieve better performance.</td>
  </tr>
</table>
<p class="normal"> &nbsp; Examples:</p>
<p class="normal">&nbsp;&nbsp;(10,000 rows, batchsize 256, no indexes)<br />
<strong><em>&nbsp;<span class="codetext">&nbsp;bulkinsert</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(50,000 rows, batchsize 256, no indexes)<br />
<strong><em>&nbsp;<span class="codetext">&nbsp;bulkinsert -r 50000</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(5,000 rows, batchsize 512, 3 indexes)<br />
  <strong><em>&nbsp;<span class="codetext">&nbsp;bulkinsert -r 5000 -s 512 -i 3</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;For full syntax of the program, try &quot;<span class="style111">bulkinsert -help</span>&quot;.</p>
<p class="normal"><br />
</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="54" valign="top" class="normal">&nbsp; <strong>plsqlODBC</strong></td>
    <td width="608" valign="top" class="normal">This sample program uses ODBC to access common PL/SQL packages (emp_pkg and sample_pkg) in four different ways:<br />
        <br />
      - Calls a stored procedure with IN and OUT parameters<br />
      - Calls a stored function with IN and OUT parameters<br />
      - Calls an anonymous block and passes host variables into and out of the block<br />
      - Calls a store procedure to open a ref cursor and uses ODBC to process the result-set of the ref cursor <br />
      <br />
      The EMP table and the emp_pkg and sample_pkg PL/SQL packages need to exist for this program to work.</td>
  </tr>
</table>
<p class="normal">Example usage:</p>
<p>&nbsp;&nbsp;(run the program using the default DSN and default user , it will prompt for the password)<br />
    <span class="codetext">&nbsp;&nbsp;<strong>plsqlODBC</strong></span></p>
<p>&nbsp;&nbsp;(run the program specifying the DSN and username, it will prompt for the password)<br /><span class="codetext"><strong>
    &nbsp;&nbsp;plsqlODBC -connstr &quot;DSN=sampledb;UID=appuser&quot;</strong></span></p>
<p>&nbsp;&nbsp;(run the program specifying the DSN, username and password)<br />
    <span class="codetext"><strong>&nbsp;&nbsp;plsqlODBC -connstr &quot;DSN=sampledb;UID=appuser;PWD=mypassword&quot;</strong></span><br />
</p>
<p>For full syntax of the program, try &quot;<em>plsqlODBC -help</em>&quot;.</p>
<p class="normal">&nbsp;</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="62" valign="top" class="normal">&nbsp; <strong>tpcb</strong></td>
    <td width="608" valign="top" class="normal">This program implements a TPCB-like workload benchmark. The code populates the <span class="style121">ACCOUNTS</span>, <span class="style121">BRANCHES</span>, and <span class="style121">TELLERS</span> tables. It then executes a modified version of the TPCB benchmark, performing 25,000 transactions. <br />
      <br />
Each transaction updates the balance in the <span class="style121">ACCOUNTS</span>, <span class="style121">BRANCHES</span> and TELLERS tables, fetches the new balance from the <span class="style121">ACCOUNTS </span> table, and appends a record to the <span class="style121">HISTORY </span> table. At termination, it prints the measured  performance.</td>
  </tr>
</table>
<p class="normal">Examples <br />
</p>
<p class="normal">&nbsp;&nbsp;(25,000 transactions, scale 1)<br />
  <strong><em>&nbsp;<span class="codetext">&nbsp;&nbsp;tpcb</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(250,000 transactions, scale 2)<br />
  <strong><em>&nbsp;<span class="codetext">&nbsp;&nbsp;tpcb -xact 250000 -scale 2</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;For full syntax of the program, try &quot;<em>tpcb -help</em>&quot;.</p>
<p class="normal"><br />
</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="62" valign="top" class="normal">&nbsp; <strong>tptbm</strong></td>
    <td width="608" valign="top" class="normal">This program implements a multi-user throughput benchmark. By default, the transaction mix consists of 80% <span class="style121">SELECT</span> (read) transactions and 20% <span class="style121">UPDATE</span> (write) transactions. In addition to <span class="style121">SELECTs</span> and <span class="style121">UPDATEs</span>, <span class="style121">INSERTs</span> can also be included in the transaction mix. The ratio of <span class="style121">SELECTs</span>, <span class="style121">UPDATEs</span> and <span class="style121">INSERTs</span> is specified at the command line. Each transaction consists of one or more SQL operations.<br/>
        <br/>
The benchmark initially populates the data store, and then executes the transaction mix on it. The number of rows inserted as part of the transaction mix cannot exceed the number of rows with which the database is populated initially.<br/>
<br/>
The measurement error for the benchmark is at most 2 seconds. This will be negligible at loads with a duration in excess of 200 seconds. A suggested load for the benchmark is one which lasts at least 600 seconds.<br/>
<br/>
The schema for this test  is described in the program source file <span class="codetext">tptbm.c</span>.
    </td>
  </tr>
</table>
<p class="normal">Examples:</p>
<p class="normal">&nbsp;&nbsp;(80% reads, 20% updates, 1 process, 10,000 transactions)<br />
  <strong><em>&nbsp;<span class="codetext">&nbsp;tptbm</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(80% reads, 20% updates, 2 process, 100,000 transactions, random number generator uses 3 as the seed)<br />
  <strong><em>&nbsp;<span class="codetext">&nbsp;tptbm -proc 2 -xact 100000 -seed 3 </span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(85% reads, 10% inserts, 5% updates, 1 process, 10,000 transactions)<br />
  <strong><em>&nbsp;&nbsp;<span class="codetext">tptbm -read 85 -insert 10 </span></em></strong></p>
<p class="normal">&nbsp;&nbsp;For full syntax of the program, try &quot;<span class="codetext"><em>tptbm -help</em></span>&quot;).<br />
</p>
<p class="normal">&nbsp;</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="54" valign="top" class="normal">&nbsp; <strong>wiscbm</strong></td>
    <td width="608" valign="top" class="normal">This program implements and measures  a subset of queries from the Wisconsin benchmark. It will run about 30 queries, the first batch without indexes and the second batch with indexes. When finished, a report of the response time per query is generated.</td>
  </tr>
</table>
<p class="normal">Example usage:</p>
<p class="normal">&nbsp;&nbsp;(scale 1, all queries, read-committed isolation)<br />
<strong><em>&nbsp;<span class="codetext">&nbsp;&nbsp;wiscbm</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(scale 5, all queries, read-committed isolation)<br />
<strong><em>&nbsp;<span class="codetext">&nbsp;&nbsp;wiscbm -scale 2</span></em></strong></p>
<p class="normal">&nbsp;&nbsp;(scale 2, only queries [1, 3, 5-7, 10-14, 25], read-committed isolation)<br />
<strong><em>&nbsp;<span class="codetext">&nbsp;&nbsp;wiscbm -scale 2 -q 1,3,5-7,10-14,25</span></em></strong></p>
  
<p class="normal">For full syntax, try &quot;<span class="codetext"><em>wiscbm -help</em></span>&quot;.<br />
</p>
<table width="800" border="1">
  <tr>
    <td width="121" height="54" valign="top" class="normal">&nbsp; <strong>xlaSimple</strong></td>
    <td width="608" valign="top" class="normal">This particular ODBC sample program is available in the <span class="codetext">quickstart/classic/sample_code/odbc/xla</span> directory.<br />
	<br />
	This program demonstrates the usage of the TimesTen Transaction Log  API (XLA) for  C developers using ODBC. This program requires a user with XLA privilege to subscribe to changes in the database.<br />
        <br />
This program subscribes to the table APPUSER.MYDATA in the sampledb database. 
      If running the program without any parameters, the program uses the default <span class="codetext">xlauser</span> user (created in the build_sampledb script). <br />
      <br />
To generate changes to the APPUSER.MYDATA, use ttIsql to connect to sampledb under <span class="codetext">appuser</span>.  Then execute database transactions on the MYDATA table.
    </td>
  </tr>
</table>
<p class="normal">Example usage:</p>
<p class="normal">&nbsp;&nbsp;(run the program, default user is xlauser, default database is sampledb)<br />
    <strong><em>&nbsp;<span class="codetext">&nbsp;&nbsp;xlaSimple</span></em></strong></p>
<p class="normal">To exit the program, press CTRL-C.<br />
  <br />
For full syntax, try &quot;<span class="codetext"><em>xlaSimple -help&quot;</em></span>. <br />
</p>
<p>&nbsp;</p>
<p class="normal">&nbsp;</p>
<p class="normal">For more information on how to use  ODBC to develop database programs for the TimesTen database, see the<span class="doclink"> <a href="http://docs.oracle.com/database/timesten-18.1/e61199/toc.htm" target="_blank" class="doclink"><em>Oracle TimesTen In-Memory Database C Developer's Guide</em></font></a><strong>. </strong></span></p>
<p class="normal"><br />
</p>

<p>&nbsp;</p>
</div>
<div id="footer"/>
</body>

</html>
